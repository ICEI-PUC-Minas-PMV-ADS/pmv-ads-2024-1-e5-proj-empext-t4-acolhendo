<div class="flex flex-col w-full p-10">
  <h1 class="flex text-2xl mb-8">
      <span class="whitespace-nowrap">Cadastro de Artigo Nutricional</span>

      <div class="w-full flex gap-2 justify-end mb-2">
          <!-- VOLTAR -->
          <button
              matTooltip="Voltar p/ lista"
              mat-raised-button
              [color]="'warn'"
              (click)="voltar()">
              <span class="material-icons-outlined">
                  arrow_back
              </span>
          </button>


            <!-- TRASH -->
            @if (artigoId) {
              <button
                  class="relative"
                  matTooltip="Apagar evento"
                  mat-raised-button
                  [color]="'accent'"
                  [disabled]="loading"
                  (click)="apagar()">
                  <span class="material-icons-outlined">
                      delete
                  </span>
                  @if (loading) {
                      <mat-progress-spinner class="absolute right-[-0.8rem] bottom-[0.8rem]" [diameter]="12" mode="indeterminate"></mat-progress-spinner>
                  }
              </button>
          }


          <!-- SALVAR -->
          <button
              class="relative"
              matTooltip="Salvar alterações"
              mat-raised-button
              [color]="'primary'"
              [disabled]="loading"
              (click)="salvar()">
              <span class="material-icons-outlined">
                  save
              </span>
              @if (loading) {
                  <mat-progress-spinner class="absolute right-[-0.8rem] bottom-[0.8rem]" [diameter]="12" mode="indeterminate"></mat-progress-spinner>
              }
          </button>
      </div>
  </h1>

  <form focusInvalidInput class="p-4 bg-card shadow rounded overflow-hidden" [formGroup]="formDados">
      <div class="flex flex-col p-4">
          <div class="flex flex-col md:flex-row gap-4">
              @if (artigoId) {
                  <mat-form-field class="w-28">
                      <mat-label>ID</mat-label>
                      <input matInput formControlName="id" readonly>
                  </mat-form-field>
              }
          </div>

          <div class="flex flex-col md:flex-row gap-4 mb-4">
            <mat-checkbox
                [color]="'primary'"
                formControlName="telaPrincipal">
                formControlName="tela_principal">
                Exibir na Página Principal
            </mat-checkbox>
        </div>


          <div class="flex flex-col md:flex-row gap-4">
              <mat-form-field class="w-full">
                  <mat-label>Título</mat-label>
                  <input maxlength="100" matInput formControlName="titulo" />
                  <mat-error *ngIf="formDados.get('titulo')?.hasError('required') && formDados.get('titulo')?.touched">Preenchimento obrigatório</mat-error>
              </mat-form-field>
          </div>

          <div class="flex flex-col md:flex-row gap-4">
              <mat-form-field class="w-full">
                  <mat-label>Link Imagem Capa</mat-label>
                  <input maxlength="300" matInput formControlName="imagem_capa" />
                    <mat-error *ngIf="formDados.get('imagem_capa')?.hasError('required') && formDados.get('imagem_capa')?.touched">Preenchimento obrigatório</mat-error>
              </mat-form-field>
          </div>

          <div class="flex flex-col md:flex-row gap-4">
              <div class="w-full h-96">
                  <quill-editor
                      class="w-full h-80"
                      formControlName="texto">
                  </quill-editor>
              </div>
          </div>
      </div>
  </form>
</div>
